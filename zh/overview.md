## 计算 > 实例 > 概述

实例是由虚拟CPU，内存和系统盘组成的虚拟服务器。用户可以在该服务器上安装服务或应用程序，并与TOAST提供的多种服务组合使用。

## 实例构成组件

实例由以下服务产品组成。

- **镜像**: 包含实例操作系统的虚拟磁盘
- **规格**(flavor): 实例虚拟硬件性能
- **可用区**(AZ, availability zone): 创建实例的物理位置
- **密钥对**(key-pair): 用于访问实例的密钥
- **安全组**(security group): 实例网络安全设置
- **网络**: 连接到实例的虚拟网络

实例属性及使用方法受以上服务产品的影响。其中，除镜像与可用区之外的其它设置可以在实例创建后进行更改。但，某些特殊的实例规格(flavor)例外。有关更改实例规格的详细说明，请参考[控制台使用指南之更改实例规格](./console-guide/#_14)。

### 镜像

镜像是指包含操作系统的虚拟磁盘。TOAST当前支持以下操作系统。

| 操作系统 | 版本 |
|------- | ---- |
| CentOS | 6.5<br>7.1|
| Debian | 8.2.0|
| Ubuntu | 14.04 |
| Windows | 2012 R2 Standard  |

所有镜像都设置为最佳运行状态，并且已通过TOAST安全验证，故用户可安全使用。有关镜像的详细说明请参考[镜像概要](/Compute/Image/zh/overview/)。

### 实例规格(Instance flavor)

TOAST提供多种类型的实例规格，以适应客户需求。客户可以根据要运行的服务或应用程序的性质选择适合的实例规格。并且，可以在Web控制台轻松更改已创建的实例规格。

| 类型    | 描述 |
| ------- | -------------------------------------------------|
| M | CPU与内存设置较均衡。用于服务或应用程序性能要求不明确时。 |
| C | 具有高CPU性能。用于需要高性能计算的Web应用服务器或分析系统。|
| R | 消耗内存较大时可以使用该规格。通常用于内存数据库或缓存服务器。|
| T | 价格低廉。用于低工作负荷的服务器。|
| I | 适用于高磁盘IOPS（input/output operations per second），如数据库服务器。使用此类型可确保高效的I/O性能。|
| U | 价格最为低廉。用于低工作负荷的服务器。<br>由于使用本地磁盘，稳定性较其它实例相对较低，但价格划算。<br>此类型实例不保证I/O性能。 |

### 可用区(Availability zone)

为防止由物理硬件问题引起故障，TOAST将整个系统划分为多个可用区。存储、网络交换机、机柜和电源分别针对每个可用区进行单独配置。在一个可用区内发生的故障不会影响其他可用区，从而提高了服务整体可用性。您可以通过跨多个可用区域构建实例，以进一步提高服务的可用性。

不同的可用区之间具有以下特征。

- 跨多个可用区域创建的实例之间可以进行网络通信，不会额外产生网络使用费用。
- 在单一可用区创建的实例之间可以共享存储块，但跨多个可用区创建的实例之间无法共享存储块。
- 不同可用区可以共享弹性IP。如果一个可用区发生故障，弹性IP可以快速移动至另一个可用区，以最大限度减少停机时间。


### 密钥对(Key-pair)

密钥对基于结构([PKI](https://zh.wikipedia.org/wiki/%E5%85%AC%E9%96%8B%E9%87%91%E9%91%B0%E5%9F%BA%E7%A4%8E%E5%BB%BA%E8%A8%AD), public key infrastructure)的SSH公钥和私钥对。如果要访问TOAST创建的实例，您需要使用密钥对，而不是使用安全性低的键盘输入ID/密码进行认证。用户可以使用私钥加密登录信息，将其发送到实例，验证连接，并安全地连接到实例。使用私钥访问实例的具体方法请参考[实例访问方法](#_9)。

您可以在创建实例时从TOAST控制台创建密钥对，也可以注册并使用自己的密钥对。 密钥对注册方法请参考[控制台向导之导入密钥对](./console-guide/#_15)。

> [注意]
>当您创建新密钥对时，您将下载密钥对的私钥。私钥仅发放一次，因此请将下载的私钥保存在安全的磁盘或USB驱动器上。如果私钥泄露到外部，任何人都可以使用该私钥访问相关实例，因此必须谨慎管理。

### 安全组(Security group)

安全组是一种虚拟防火墙，它是重要的网络安全隔离手段，具备状态检测包过滤功能。有关安全组的详细说明请参考[VPC概述](/Network/VPC/zh/overview/)。

> [参考]
> 默认安全组禁止所有来自外部的入方向(in-bound)的访问。(in-bound) 。使用SSH连接到实例时，在实例所属的安全组中将SSH打开，然后再连接到该实例。

### 网络

实例要与外部通信，必须至少要连接到一个VPC定义网络。您无法访问未连接到网络的实例。若要新建或更改网络，请参考[VPC概述](/Network/VPC/zh/overview/)。

## 计费

实例计费方式如下。

* 实例从创建开始计费。
* 实例系统盘区别于实例，按照块存储计费基准收取费用。
* 对于已关闭的实例，仅对实例的系统盘及块存储进行计费。


## 实例访问方法

### Linux实例访问方法

连接Linux实例时，使用SSH客户端。如果SSH访问端口（默认为22）未在实例的安全组中打开，则无法连接。如何允许SSH访问请参考[VPC 概述](/Network/VPC/zh/overview/)。如果没有为实例分配弹性IP，则无法从外部TOAST访问该实例。有关如何分配弹性IP，请参考[VPC概述](/Network/VPC/zh/overview/)。

#### 如何在Mac或Linux上使用SSH客户端访问Linux实例

在Mac或Linux上，通常默认安装SSH客户端。从SSH客户端，使用密钥对的私钥进行连接，如下所示。

CentOS实例

	$ ssh -i my_private_key.pem root@<实例IP>

Ubuntu实例

	$ ssh -i my_private_key.pem ubuntu@<实例IP>

Debian实例

	$ ssh -i my_private_key.pem debian@<实例IP>

####如何在Windows上使用PuTTY SSH客户端访问Linux实例

PuTTY PuTTY是Windows上使用较普遍的SSH客户端程序。安装[PuTTY](https://www.chiark.greenend.org.uk/~sgtatham/putty/latest.html)或带有韩文补丁的 [iPuTTY](https://github.com/iPuTTY/iPuTTY/releases/tag/l0.70i)。

在Windows使用PuTTY SSH客户端连接到Linux实例需要三个步骤。

* 将密钥对的私钥更改为PuTTY的私钥
* 在PuTTY中注册私钥
* 使用PuTTY访问实例


##### 1. 将密钥对的私钥更改为PuTTY的私钥

在PuTTY中，需要将密钥对私钥替换为PuTTY的私钥使用。密钥转换使用同PuTTY一同安装的puttygen。

![图片1](http://static.toastoven.net/prod_instance/putty001-ssh-001-en.png)

在**PuTTY Key生成器**对话框底部的**每项参数**中将**要生成的密钥类型**选择为 **RSA**，**要创建的密钥位**输入默认的'2048'位。单击**任务**下方**检索私钥文件**旁边的**检索**按钮，调用密钥对的私钥文件。

![图片2](http://static.toastoven.net/prod_instance/putty002-en.png)

单击**任务**下方**保存已创建的密钥**旁边的**保存私钥**按钮，以保存转换为PuTTY类型的密钥对私钥。如果您将**密钥密码短语**留空，保存私钥，则会弹出**是否不使用密钥密码短语，继续保存私钥？**消息。如果要安全保存私钥，请设置密码短语并保存。

> [注意]
如果要将实例设置为自动登录，则不应使用密码短语。如果使用密码，则必须在登录时手动输入私钥的密码。

##### 2. 在PuTTY中注册私钥

PuTTY的私钥可以通过2种方式进行注册并使用。

* 如何在PuTTY中注册并使用身份认证私钥文件
* 如何在pageant(PuTTY认证代理)中注册并使用身份认证私钥文件

**A. 如何在PuTTY中注册和使用身份认证私钥文件**


运行PuTTY，并在左侧**类别**中选择**连接> SSH > Auth**。在右侧**认证参数**下方的**认证私钥文件**中注册PuTTY私钥。

![图片3](http://static.toastoven.net/prod_instance/putty005-en.png)

注册私钥后，保存注册信息，则无需每次重复注册私钥文件。有关如何保存访问信息，请参考以下方法。


**B. 如何在pageant(PuTTY认证代理)中注册和使用认证私钥文件**


当您运行使用PuTTY安装的pageant时，Windows系统托盘中会出现如下图标。右键单击pageant图标并单击**添加密钥 **菜单，为PuTTY添加私钥。

![图片4](http://static.toastoven.net/prod_instance/putty006-en.png)

如果要确认私钥是否已添加，请单击**查看密钥**确认。如果密钥添加成功，您可以看到所添加的密钥，如下图所示。

![图片5](http://static.toastoven.net/prod_instance/putty008-en.png)

Pageant一旦开始运行，会一直在Windows系统托盘中运行，因此，无需每次访问实例时都要重新运行它。但是，如果重启Windows，则需要重新运行。

##### 3. 使用PuTTY访问实例

如果PuTTY私钥已注册成功，请运行PuTTY。

![图片6](http://static.toastoven.net/prod_instance/putty009-en.png)

默认访问信息的**主机名**使用如下。

CentOS

	root@<实例IP>

Ubuntu

	ubuntu@<实例IP>

Debian

	debian@<实例IP>

**端口**SSH默认端口 22，**连接方式**指定为**SSH**。

如果信息全部正确，请保存会话。在**加载、保存、删除已保存的会话**中，将要保存的会话名称写入已保存会话下方的字段中，并单击**保存**按钮保存会话。如果不保存会话，则2-A中注册的私钥设置也将不做保存。

点击**打开**即可访问实例。


### 如何访问Windows实例

如果要连接到Windows服务器，请从TOAST控制台中选择要连接的Windows实例。在如下详细页面的**实例连接**(实例连接)标签中，单击**确认密码**按钮，以确认在Windows服务器上设置的密码。

![访问Windows实例](http://static.toastoven.net/prod_instance/windows-login-en.png)

在**确认密码**中输入的密钥对私钥不会发送至服务器，仅用于解密浏览器中的密码。

单击**确认密码**旁边的**连接**按钮以获取并运行包含远程桌面连接设置的.rdp文件，访问Windows服务器。Windows服务器的ID为 `Administrator`，密码为您在TOAST控制台中查看到的密码。
