## Compute > Instance > インストールコンポーネントガイド

## NAT Instance
NATインスタンスは、プライベートネットワークインスタンスから特定IPアドレス帯域にインターネットアクセスできるようにするインスタンスです。
韓国(ピョンチョン)リージョンでのみ提供する機能です。

### 主な機能
* インターネットゲートウェイが接続されていないプライベートネットワークのインスタンスがNATインスタンスを介してインターネットにアクセスできます。
* NATインスタンスのFloating IPをソースIPに変更してインターネットにアクセスします。
* NATインスタンスまで転送されたパケットは、NATインスタンスのサブネットに接続されたルーティングテーブルのルート設定に基づいてパケットを転送します。
* NATインスタンスのサブネットに接続されたルーティングテーブルには、該当NATインスタンスをゲートウェイにするルート設定を追加してはいけません。
* インターネット上から始まった流入トラフィックは、プライベートネットワークのインスタンスが受信できません。
* NATインスタンスを介してインターネットアクセスを許可する宛先IPアドレス帯域を指定できます。
* NATインスタンスに接続して他のインスタンスに接続できます。
* セキュリティグループを設定できます。
* ネットワークACLを設定できます。
* 二重化をサポートしません。
* NATインスタンスは、ネットワークインターフェイス設定でネットワークソース/対象確認を必ず「無効」に設定する必要があります。
* NATインスタンスでプライベートイメージを作成する場合、機能が正常に動作しない場合があります。

> [参考] NATゲートウェイとの違い
>
> | 区分 | NATゲートウェイ | NATインスタンス |
> |--|--|--|
> |可用性| 二重化をサポート | 二重化をサポートしない |
> |メンテナンス|NHN Cloudで管理| ユーザーが直接管理|
> |セキュリティグループ|設定不可| 設定可|
> |ネットワークACL| 設定可 | 設定可|
> |SSH|使用不可| 使用可|

### ソース/対象確認設定
NATインスタンスが正常に動作するには、ネットワークインターフェイス設定でネットワークソース/対象確認を無効化する必要があります。

### ルート設定
NATインスタンスをルートゲートウェイに指定します。 NATインスタンスまで転送されたパケットは、NATインスタンスのサブネットに接続されたルーティングテーブルのルート設定に基づいてパケットを転送します。

### 設定注意事項
* NATインスタンスのサブネットに接続されたルーティングテーブルには、該当NATインスタンスをゲートウェイにするルート設定を追加してはいけません。
* NATインスタンスサブネットとNATインスタンスをゲートウェイとして使用するインスタンスのサブネットを分離し、別々のルーティングテーブルを使用することを強く推奨します。
* もし、NATインスタンスサブネットとNATインスタンスをゲートウェイとして使用するインスタンスのサブネットが同じか、同じルーティングテーブルに接続されている時にNATインスタンスをゲートウェイにするルート設定を追加しなければいけない場合は、該当NATインスタンスには必ずFloating IPを設定する必要があります。また、対象CIDRはIP Prefix 0 (/0)を指定する必要があります。 これ以外の設定をすると、通信ができず、そのルーティングテーブルを使用するすべてのインスタンスの通信にも影響を与える場合があります。

> [参考] NATインスタンスのルーティング設定
>
> * NATインスタンスのサブネットがルーティングテーブル1に接続されていて、NATインスタンスをゲートウェイとして使用するインスタンスがルーティングテーブル2に接続されている場合
>     * ルーティングテーブル2のルート設定で、特定CIDR(例：8.8.8.8/32)に対してNATインスタンスをゲートウェイとして指定できます。
>     * ルーティングテーブル1のルート設定にはNATインスタンスをゲートウェイとして指定してはいけません。ただし、NATインスタンスがFloating IPに接続されている場合は、例外的にIP prefix 0 (/0)を対象CIDRに設定できます。
> * NATインスタンスサブネットとNATインスタンスをゲートウェイとして使用するインスタンスのサブネットがルーティングテーブル1に一緒に接続されている場合
>     * NATインスタンスがFloating IPに接続されている場合、ルート対象CIDRにIP Prefix 0 (/0)を設定できます。
>     * 上の設定の他には、ルーティングテーブル1のルーティング設定にNATインスタンスをゲートウェイとして指定してはいけません。


## MS-SQL Instance

## MySQL Instance

## PostgreSQL Instance

## CUBRID Instance

## MariaDB Instance

## Tibero Instance

## JEUS Instance

基本提供されるイメージにはCentOS 7.8 with JEUS8Fix1(Domain Administrator Server 2022.03.22), CentOS 7.8 with JEUS8Fix1(Managed Server 2022.03.22)が含まれます。
Domain Administrator Serverをインストールするには、JEUS8Fix1(Domain Administrator Server 2022.03.22)イメージを使用します。
Managed Serverをインストールするには、CentOS 7.8 with JEUS8Fix1(Managed Server 2022.03.22)イメージを使用します。

JEUSは`~/apps/jeus8にインストールされます。

インストール時、以下のプロパティで設定されます。

| 区分 | デフォルト値 |
| --- | --- |
| ドメイン名 | jeus_domain |
| WebAdminポート | 9736 |
| Adminサーバー名 | adminServer |
| AdminユーザーID | administrator |
| Adminユーザーパスワード | jeusadmin |
| ノードマネージャ | java |


## 起動確認

JEUSの設定や制御を行うにはノードマネージャを起動した後、WebAdminまたはjeusadminから制御する必要があります。

### インスタンス接続

インスタンスの作成が完了したら、SSHを使用してインスタンスにアクセスします。
インスタンスにFloating IPが接続されていて、セキュリティグループでTCPポート22(SSH)が許可されている必要があります。

### ノードマネージャ起動

シェルに接続してstartNodeManagerコマンドでノードマネージャを実行します。
ノードマネージャ同士の通信が必要なため、セキュリティグループに基本ポート7730の許可ルールを追加する必要があります。

### JEUS起動

Domain Administrator ServerはstartDomainAdminServerコマンドで実行します。

```
startDomainAdminServer -uadministrator -pjeusadmin
```

### JEUS WebAdmin

次のようにWebAdminを実行します。

1. DASがインストールされたインスタンスにFloating IPを設定します。
2. 該当インスタンスのセキュリティグループに9736ポートの許可ルールを追加します。
3. Webブラウザでhttp://{Floating IP}:9736/webadminに接続するとWebAdmin画面を確認できます。


## WebtoB Instance

基本提供されるイメージはWebtoB5Fix4 with CentOS 7.8です。
WebtoBは`~/apps/webtob`にインストールされます。


### 起動確認

#### インスタンス接続

インスタンスの作成が完了したら、SSHを使用してインスタンスにアクセスします。
インスタンスにFloating IPが接続されていて、セキュリティグループでTCPポート22(SSH)が許可されている必要があります。

#### 環境設定ファイルのコンパイル

wscflコマンドを利用して設定ファイルをコンパイルします。

```
wscfl -i http.m
```

#### WebtoB起動

wsbootを利用してWebtoBを起動します。

```
wsboot
```

wsadminを利用して状態の確認や制御を行うことができます。
